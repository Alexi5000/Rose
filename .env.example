# ============================================
# REQUIRED API KEYS
# ============================================

# Groq API - Required for LLM inference and speech-to-text
# Get your API key from: https://console.groq.com/keys
GROQ_API_KEY="gsk_YOUR_API_KEY_HERE"

# ElevenLabs API - Required for text-to-speech (Rose's voice)
ELEVENLABS_API_KEY=""
ELEVENLABS_VOICE_ID=""

# Qdrant Vector Database - Required for long-term memory
# For local Docker deployment, use the service name from docker-compose.yml
# For local development outside Docker, use http://localhost:6333
QDRANT_URL="http://qdrant:6333"
QDRANT_API_KEY=""

# ============================================
# ROSE-SPECIFIC CONFIGURATION
# ============================================

# Rose's Voice ID (optional - overrides ELEVENLABS_VOICE_ID for Rose's healing voice)
# Use a warm, calming female voice for therapeutic interactions
ROSE_VOICE_ID=""

# ============================================
# SERVER CONFIGURATION
# ============================================

# Server port (automatically set by Railway in production)
PORT=8080

# Server host (use 0.0.0.0 for production, 127.0.0.1 for local dev)
HOST=0.0.0.0

# ============================================
# SECURITY CONFIGURATION
# ============================================

# CORS allowed origins (comma-separated list, or "*" for all)
# For production, set to your frontend domain(s): "https://yourdomain.com,https://www.yourdomain.com"
# For development, use "*" or "http://localhost:5173,http://localhost:3000"
ALLOWED_ORIGINS="*"

# Rate limiting (requests per minute per IP address)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=10

# Security headers (CSP, HSTS, X-Frame-Options, etc.)
ENABLE_SECURITY_HEADERS=true

# ============================================
# WORKFLOW CONFIGURATION
# ============================================

# Global timeout for LangGraph workflow execution (in seconds)
# Prevents hanging requests and resource exhaustion
WORKFLOW_TIMEOUT_SECONDS=60

# ============================================
# LOGGING CONFIGURATION
# ============================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Use INFO for production, DEBUG for development
LOG_LEVEL=INFO

# Log format: json (for production) or console (for development)
# JSON format is recommended for production for structured logging and parsing
LOG_FORMAT=json

# ============================================
# API DOCUMENTATION
# ============================================

# Enable OpenAPI/Swagger documentation
# Set to false in production if you want to hide API docs
# Access docs at: /api/v1/docs (Swagger UI) and /api/v1/redoc (ReDoc)
ENABLE_API_DOCS=true

# ============================================
# RESOURCE MANAGEMENT
# ============================================

# Maximum request size in bytes (default: 10MB)
# Prevents memory exhaustion from large payloads
MAX_REQUEST_SIZE=10485760

# Session retention period in days (default: 7 days)
# Sessions older than this will be automatically cleaned up
# Cleanup runs daily at 3 AM
SESSION_RETENTION_DAYS=7

# Together AI API - Required for image generation (frozen feature)
# Get your API key from: https://api.together.xyz/settings/api-keys
# Note: Image generation is currently disabled in Rose's voice-first release
TOGETHER_API_KEY="YOUR_TOGETHER_API_KEY_HERE"

# ============================================
# FEATURE FLAGS
# ============================================

# Enable/disable features without code changes
# Useful for gradual rollouts, A/B testing, and quick rollbacks

# WhatsApp integration (frozen for future release)
FEATURE_WHATSAPP_ENABLED=false

# Image generation (frozen for future release)
FEATURE_IMAGE_GENERATION_ENABLED=false

# TTS response caching (recommended: enabled)
FEATURE_TTS_CACHE_ENABLED=true

# Database backend: "sqlite" or "postgresql"
# Use "sqlite" for single instance, "postgresql" for horizontal scaling
FEATURE_DATABASE_TYPE=sqlite

# Session affinity / sticky sessions (optional performance optimization)
FEATURE_SESSION_AFFINITY_ENABLED=false

# Read replicas for database queries (requires PostgreSQL)
FEATURE_READ_REPLICA_ENABLED=false

# Multi-region deployment (requires regional databases)
FEATURE_MULTI_REGION_ENABLED=false

# ============================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================

# PostgreSQL connection string (required if FEATURE_DATABASE_TYPE=postgresql)
# Format: postgresql://user:password@host:port/database
# Example: postgresql://postgres:password@region.railway.app:5432/railway
# DATABASE_URL=""

# Read replica connection string (optional, requires FEATURE_READ_REPLICA_ENABLED=true)
# DATABASE_READ_REPLICA_URL=""

# Connection pool settings
# DATABASE_POOL_SIZE=10
# DATABASE_MAX_OVERFLOW=20

# Regional database URLs (optional, requires FEATURE_MULTI_REGION_ENABLED=true)
# DATABASE_URL_US=""
# DATABASE_URL_EU=""
# DATABASE_URL_ASIA=""

# ============================================
# MONITORING AND ALERTING
# ============================================

# Sentry error tracking (optional but recommended for production)
# Get your DSN from: https://sentry.io
# SENTRY_DSN=""

# Sentry sampling rates (0.0 to 1.0)
# Lower values reduce overhead but may miss some issues
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions
SENTRY_PROFILES_SAMPLE_RATE=0.1  # 10% of transactions

# Environment name for tracking (development, staging, production)
ENVIRONMENT=production

# Application version for release tracking
APP_VERSION=1.0.0

# Alert configuration
# Enable/disable specific alert types
ALERT_ERROR_RATE_ENABLED=true
ALERT_ERROR_RATE_THRESHOLD=5.0  # Percentage (triggers if error rate > 5%)

ALERT_RESPONSE_TIME_ENABLED=true
ALERT_RESPONSE_TIME_THRESHOLD=2000.0  # Milliseconds (triggers if P95 > 2000ms)

ALERT_MEMORY_ENABLED=true
ALERT_MEMORY_THRESHOLD=80.0  # Percentage (triggers if memory usage > 80%)

ALERT_CIRCUIT_BREAKER_ENABLED=true

# Monitoring evaluation interval (seconds between alert checks)
MONITORING_EVALUATION_INTERVAL=60

# ============================================
# OPTIONAL FEATURES (FROZEN FOR FUTURE RELEASE)
# ============================================

# WhatsApp Integration (OPTIONAL - not used in current voice-first release)
# WHATSAPP_PHONE_NUMBER_ID=""
# WHATSAPP_TOKEN=""
# WHATSAPP_VERIFY_TOKEN=""
